# 多工具智能代理範例

[![English](https://img.shields.io/badge/README-English-blue.svg)](README.md) [![繁體中文](https://img.shields.io/badge/README-繁體中文-red.svg)](README-zh.md)

這個範例展示了一個進階的 AI 助手，可以根據用戶的上下文和請求智能地選擇並使用多個工具。

## 概述

多工具代理範例展示了：
- **上下文感知工具選擇**：代理根據用戶輸入自動選擇適當的工具
- **多工具整合**：天氣、計算器、時間和通知工具協同工作
- **順序工具使用**：代理可以對複雜請求按順序使用多個工具
- **真實場景**：多工具互動的實際範例

## 可用工具

### 1. 🌤️ 天氣工具 (`get_weather`)
檢索任何地點的天氣信息。

**功能**：
- 當前天氣狀況
- 溫度（攝氏/華氏）
- 濕度和風速
- 多地點支援

**參數**：
- `location`（必需）：城市和國家
- `unit`（可選）："celsius" 或 "fahrenheit"

### 2. 🧮 計算器工具 (`calculate`)
執行數學計算。

**運算**：
- 基本算術：加、減、乘、除
- 進階：乘方、平方根
- 錯誤處理：除零、負數平方根

**參數**：
- `operation`（必需）：計算類型
- `a`（必需）：第一個數字
- `b`（可選）：第二個數字（sqrt 不需要）

### 3. ⏰ 時間工具 (`get_time`)
提供跨時區的當前時間信息。

**功能**：
- 多時區支援
- 各種時間格式（ISO、人類可讀、時間戳）
- 附加信息：星期幾、一年中的第幾天

**參數**：
- `timezone`（可選）：時區標識符（默認："UTC"）
- `format`（可選）："iso"、"human" 或 "timestamp"

### 4. 📢 通知工具 (`send_notification`)
模擬發送通知和提醒。

**功能**：
- 即時或預定通知
- 優先級別
- 自定義標題和消息

**參數**：
- `message`（必需）：通知內容
- `title`（可選）：通知標題
- `priority`（可選）："low"、"normal"、"high"、"urgent"
- `delay_minutes`（可選）：發送前延遲

## 測試場景

範例運行各種場景來測試工具組合：

### 單工具使用
1. **天氣查詢**："東京的天氣如何？"
2. **數學計算**："計算 144 的平方根"
3. **時間查詢**："紐約現在幾點？"
4. **通知**："提醒我明天的牙醫預約"

### 多工具組合
5. **天氣 + 時間**："倫敦的天氣如何，現在幾點？"
6. **計算器 + 天氣**："計算 25 * 4 並告訴我舊金山的天氣"
7. **時間 + 通知**："獲取東京時間並在 30 分鐘後提醒我開會"

## 預期代理行為

代理應該：
1. **解析用戶意圖**：理解需要什麼工具
2. **選擇適當工具**：為每個請求選擇正確的工具
3. **按順序執行**：必要時使用多個工具
4. **提供全面回應**：有意義地組合結果

## 運行範例

### 前置條件
1. Go 1.22 或更高版本
2. OpenAI API 金鑰

### 設定
1. **配置環境**：
   ```bash
   cp .env.example .env
   # 編輯 .env 並添加您的 OpenAI API 金鑰
   ```

2. **安裝依賴**：
   ```bash
   go mod tidy
   ```

3. **運行範例**：
   ```bash
   go run main.go
   ```

## 範例輸出

```
🚀 多工具 AI 助手演示
測試各種工具組合...
============================================================

🔄 測試 1/7
👤 用戶：東京的天氣如何？
🌤️  WEATHER[Tokyo, Japan]: 22°C, Partly Cloudy
🤖 助手：東京目前是多雲天氣，溫度為 22°C。濕度為 62%，風速為 12.0 km/h。

🔄 測試 2/7
👤 用戶：計算 144 的平方根
🧮 CALC[sqrt]: √144.00 = 12.00
🤖 助手：144 的平方根是 12。

🔄 測試 5/7
👤 用戶：倫敦的天氣如何，現在幾點？
🌤️  WEATHER[London, UK]: 18°C, Cloudy
⏰ TIME[Europe/London]: Monday, January 15, 2024 at 2:30:45 PM
🤖 助手：倫敦目前是陰天，溫度為 18°C。當地時間是 2024年1月15日星期一下午 2:30:45。
```

## 學習成果

這個範例展示了：

1. **工具選擇邏輯**：代理如何根據上下文選擇工具
2. **多工具協調**：組合多個工具的結果
3. **錯誤處理**：優雅地處理工具失敗
4. **回應合成**：從工具輸出創建連貫的回應
5. **上下文理解**：解析複雜的用戶請求

## 關鍵實現細節

### 工具註冊
```go
tools := []agent.Tool{
    &WeatherTool{},
    &CalculatorTool{},
    &TimeTool{},
    &NotificationTool{},
}
```

### 代理配置
```go
agent.New(
    agent.WithName("multi-tool-assistant"),
    agent.WithInstructions(`您是一個有用的助手，可以訪問多個工具...`),
    agent.WithTools(tools...),
    // ... 其他選項
)
```

### 工具介面實現
每個工具都實現了 `agent.Tool` 介面：
- `Name()`：工具標識符
- `Description()`：工具用途
- `Schema()`：參數定義
- `Execute()`：工具邏輯

## 架構優勢

1. **模組化**：每個工具都是獨立且可重用的
2. **可擴展性**：易於添加新工具
3. **可測試性**：工具可以單獨測試
4. **可擴展性**：框架處理工具編排

## 常見用例

這種模式適用於：
- **虛擬助手**：多功能 AI 幫手
- **工作流自動化**：鏈接不同的操作
- **API 編排**：組合多個服務調用
- **業務流程自動化**：複雜的多步驟工作流